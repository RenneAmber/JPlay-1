<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
        "http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>
    <constant name="struts.multipart.maxSize" value="1073741824"/>

    <package name="Bilibili" extends="struts-default, json-default" >
        <!-- Interceptor -->
        <interceptors>
            <interceptor name="auth" class="com.interceptor.LoginIntercepter" />
            <interceptor-stack name="myStack">
                <interceptor-ref name="auth"></interceptor-ref>
                <interceptor-ref name="defaultStack"></interceptor-ref>
            </interceptor-stack>
        </interceptors>
        <default-interceptor-ref name="myStack"></default-interceptor-ref>

        <action name="favoriteRecord" class="userBehaviorRecord" method="favoriteBehavior">
            <result name="success" type="json">
                <param name="root">userId</param>
                <param name="root">videoId</param>
            </result>
        </action>

        <action name="thumbRecord" class="userBehaviorRecord" method="thumbBehavior">
            <result name="success" type="json">
                <param name="root">userId</param>
                <param name="root">videoId</param>
            </result>
        </action>

        <action name="watchedRecord" class="userBehaviorRecord" method="watchedBehavior">
            <result name="success" type="json">
                <param name="root">userId</param>
                <param name="root">videoId</param>
            </result>
        </action>

        <!-- File Upload -->
        <action name="uploadTestAction" class="uploadTestAction" method="execute">
            <result name="json"></result>
            <interceptor-ref name="fileUpload">
                <param name="maximumSize">1073741824</param>
                <param name="allowedTypes">
                    video/x-msvideo,video/x-dv,video/mp4,video/mpeg,video/mpeg,video/quicktime,video/x-ms-wmv,video/x-flv,video/x-matroska
                </param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack"></interceptor-ref>
        </action>

        <!-- User -->
        <action name="registerAction" class="registerAction" method="execute">
            <result name="success">index.jsp</result>
        </action>

        <action name="logInAction" class="logInOutAction" method="logIn">
            <result name="success">index.jsp</result>
            <result name="user">index.jsp</result>
            <result name="admin">index.jsp</result>
            <result name="error">login.jsp</result>
        </action>

        <action name="logOutAction" class="logInOutAction" method="logOut">
            <result name="success">index.jsp</result>
        </action>

<<<<<<< HEAD
        <action name="getAllUser" class="com.action.userAction" method="listUsers">
=======
        <action name="getAllUser" class="userAction" method="getAllUser">
>>>>>>> 7a954562786d02a43201f5bda7757ec5fbb008cd
            <result name="success" type="json">
                <param name="root">userList</param>
            </result>
        </action>
        <action name="deleteUser" class="userAction" method="deleteUser">
            <result name = "success" type="json">
                <param name="root">userId</param>
            </result>
        </action>

        <action name="updateUser" class="userAction" method="updateUser">
            <result name = "success" type="json">
                <param name="root">userId</param>
            </result>
        </action>
        <!-- 上传视频信息 -->
        <action name="*VideoInfo" class="com.action.videoAction" method = "{1}">
            <result name="success">/index.jsp</result>
            <result name="error">/upload.jsp</result>
        </action>

        <!-- 收藏-->
        <action name="favCollect" class="com.action.videoFavoriteAction" method="addVideo">
            <result name="success">/single.jsp</result>
        </action>
        <action name="favCollectWithNewFile" class="com.action.videoFavoriteAction" method="createFile">
            <result name="success">/single.jsp</result>
        </action>

        <!-- 私信 -->
            <!-- 发送私信-->
        <action name="sendSecretLetter" class="com.action.secretLetterAction" method="sendLetter">
            <result name="success">/userLetter.jsp</result>
        </action>
            <!-- 私信列表 -->
        <action name="letterList" class="com.action.secretLetterAction" method="listLetter">
            <result name="json" type="json">
                <param name="root">dataMap</param>
            </result>
        </action>

        <!--发布评论 -->
        <action name="commentAction" class="com.action.videoCommentAction" method="commentVideo">
            <result name="success">single.jsp</result>
        </action>
        <!--回复评论-->
        <action name="replyComment" class="com.action.videoCommentReplyAction" method="replyComment">
            <result name="success">single.jsp</result>
        </action>
        <!--评论点赞-->
        <action name="thumbComment" class="com.action.videoCommentAction" method="thumbCount">
            <result name="success">single.jsp</result>
        </action>
        <!-- 评论回复的点赞-->
        <action name="thumbReply" class="com.action.replyAction" method="thumbCount">
            <result name="success">single.jsp</result>
        </action>

        <!-- 查看我的兴趣部落 -->
        <action name="myInterestGroup" class="com.action.interestGroupAction" method="listInterestGroupByUser">
            <result name="success" type="json">
                <param name="root">dataMap</param>
            </result>
        </action>
        <!-- 加入兴趣部落-->
        <action name="addInterestGroup" class="com.action.interestGroupAction" method="addInterestGroup">
            <result name="success">single.jsp</result>
        </action>

        <!--查看我的上传 -->
        <action name="myUpload" class="com.action.userAction" method="listMyVideo">
            <result name="success" type="json">
                <param name="root">dataMap</param>
            </result>
        </action>

        <!-- 显示single页面所需数据（如评论专区，video信息等）-->
        <action name="singleData" class="com.action.videoAction" method="autoPlay">
            <result name="success">single.jsp</result>
        </action>

        <!-- 视频点赞功能-->
        <action name="thumbCount" class="com.action.videoAction" method="thumbCount">
            <result name="success">single.jsp</result>
        </action>

        <!-- 评论举报功能-->
        <action name="reportComment" class="com.action.videoCommentAction" method="report">
            <result name="success">single.jsp</result>
        </action>
        <!--回复举报功能-->
        <action name="reportReply" class="com.action.replyAction" method="report">
            <result name="success">single.jsp</result>
        </action>
        <!-- 全文搜索功能(index)-->
        <action name="searchAction" class="com.action.videoAction" method="search">
            <result name="success">index.jsp</result>
        </action>
    </package>
</struts>